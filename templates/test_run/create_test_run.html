{% extends "base.html" %}
{% block title %}Create Test Run{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
{% endblock %}

{% block content %}
<div class="form-card">
  <h2>Create a New Test Run</h2>

  <form action="{{ url_for('test_runs_bp.handle_create_test_run') }}" method="POST">
    <!-- Optional: Name for the run -->
    <div class="form-group">
      <label for="run_name">Run Name (optional)</label>
      <input type="text" name="run_name" id="run_name" placeholder="e.g., Payment Regression Run">
    </div>

    <!-- Select an Endpoint -->
    <div class="form-group">
      <label for="endpoint_id">Select Endpoint:</label>
      <select name="endpoint_id" id="endpoint_id" required>
        <option value="" disabled selected>-- Choose an Endpoint --</option>
        {% for endpoint in endpoints %}
          <option value="{{ endpoint.id }}">{{ endpoint.hostname }} / {{ endpoint.endpoint }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Select one or more Test Suites -->
    <div class="form-group">
      <label>Select Test Suites:</label>
      {% for suite in test_suites %}
        <div style="margin-left: 1.5rem;">
          <label>
            <input type="checkbox" name="suite_ids" value="{{ suite.id }}">
            {{ suite.description }}
          </label>
        </div>
      {% endfor %}
    </div>

    <button type="submit">Create Test Run</button>
  </form>
</div>
{% endblock %}
