{% extends "base.html" %}

{% block content %}
<div class="content-card">
  <h1>Endpoint Report</h1>
  <div class="form-group">
    <label for="endpoint-select">Select an Endpoint:</label>
    {# --- Add the data-base-url attribute here --- #}
    <select id="endpoint-select" 
            data-base-url="{{ url_for('report_bp.report_ajax', endpoint_id=0) }}"> 
      <option value="">-- Select an Endpoint --</option>
      {% for endpoint in endpoints %}
        <option value="{{ endpoint.id }}">
          {{ endpoint.name }} - {{ endpoint.hostname }}{{ endpoint.endpoint }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div id="report-details" class="results-container">
    <p>Please select an endpoint to view its report.</p> 
  </div>

  <div id="chart-container" class="content-card" style="margin-top: 2rem;">
      <h3>Test Metrics Chart</h3>
      <div style="position: relative; height:300px; width:100%"> 
          <canvas id="metricsChart"></canvas>
      </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {# Ensure the path is correct relative to your 'static' folder #}
  <script src="{{ url_for('static', filename='js/reports/report.js') }}"></script> 
{% endblock %}