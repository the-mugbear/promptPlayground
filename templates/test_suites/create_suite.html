{% extends "base.html" %}

{% block head %}
  <!-- New list test suite styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
{% endblock %}


{% block content %}
<h1>Create Test Suite</h1>

<form 
  id="createSuiteForm" 
  action="{{ url_for('test_suites_bp.create_test_suite') }}" 
  method="POST"
>
  <!-- Suite Details -->
  <fieldset>
    <legend>Test Suite Details</legend>
    
    <label for="description">Description <span class="required">*</span></label>
    <input 
      type="text" 
      name="description" 
      id="description" 
      placeholder="E.g., Regression Suite for Payment Module"
    >
    <br><br>

    <!-- Example of a tooltip on Behavior: -->
    <div class="tooltip" style="display:inline-block;">
      <label for="behavior">Behavior</label>
      <span class="tooltiptext">
        Provide the main expected behavior of your test suite.
      </span>
    </div>
    <br>
    <input 
      type="text" 
      name="behavior" 
      id="behavior" 
      placeholder="E.g., Payment success scenarios"
    >
    <br><br>

    <div class="tooltip" style="display:inline-block;">
      <label for="attack">Attack</label>
      <span class="tooltiptext">
        Describe negative/security edge cases if applicable.
      </span>
    </div>
    <br>
    <input 
      type="text" 
      name="attack" 
      id="attack" 
      placeholder="E.g., Payment error or hack attempts"
    >
  </fieldset>

  <!-- New Test Cases -->
  <fieldset>
    <legend>Add New Test Cases</legend>
    <textarea 
      name="new_test_cases" 
      id="new_test_cases" 
      rows="4" 
      placeholder="Test case #1\nTest case #2"
    ></textarea>
    <small class="help-text">
      Enter one test case per line.  
      Each line will become a new test case.
    </small>
  </fieldset>

  <!-- Existing Test Cases -->
  <fieldset>
    <legend>Select Existing Test Cases</legend>
    <input 
      type="text" 
      id="tcSearch" 
      placeholder="Search existing test cases..."
      style="margin-bottom: 1rem; width: 80%;"
    >
    <div id="testCasesContainer">
      {% if existing_test_cases %}
        {% for test_case in existing_test_cases %}
          <label class="test-case-item">
            <input 
              type="checkbox" 
              name="selected_test_cases" 
              value="{{ test_case.id }}"
            >
            {{ test_case.description }}
          </label>
        {% endfor %}
      {% else %}
        <p>No existing test cases available.</p>
      {% endif %}
    </div>
  </fieldset>

  <button type="submit">Create Suite</button>
</form>
{% endblock %}
